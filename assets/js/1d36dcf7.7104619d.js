"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[133],{3793:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>l});const t=JSON.parse('{"id":"APIReference/setConsent","title":"Tracking User Consent","description":"Send consent and/or brand consents.","source":"@site/docs/APIReference/setConsent.md","sourceDirName":"APIReference","slug":"/APIReference/setConsent","permalink":"/zeotap-web-sdk-docs/docs/APIReference/setConsent","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/APIReference/setConsent.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Tracking User Consent","description":"Send consent and/or brand consents."},"sidebar":"DocumentationSidebar","previous":{"title":"Setting User Properties","permalink":"/zeotap-web-sdk-docs/docs/APIReference/setUserProperties"},"next":{"title":"Choosing a Consent Strategy","permalink":"/zeotap-web-sdk-docs/docs/Consent/consentStrategy"}}');var o=s(4848),r=s(8453);const i={sidebar_position:5,title:"Tracking User Consent",description:"Send consent and/or brand consents."},c=void 0,d={},l=[{value:"Description",id:"description",level:2},{value:"consentObject Structure",id:"consentobject-structure",level:2},{value:"Primary Consent Keys",id:"primary-consent-keys",level:3},{value:"<code>track</code> (<code>boolean</code>)",id:"track-boolean",level:4},{value:"<code>cookieSync</code> (<code>boolean</code>)",id:"cookiesync-boolean",level:4},{value:"Brand Consent Keys",id:"brand-consent-keys",level:3},{value:"Examples",id:"examples",level:2},{value:"Example 1: Grant full consent",id:"example-1-grant-full-consent",level:3},{value:"Example 2: Track but no cookie sync, with brand consent",id:"example-2-track-but-no-cookie-sync-with-brand-consent",level:3},{value:"Example 3: Deny all primary consents",id:"example-3-deny-all-primary-consents",level:3},{value:"Example 4: Brand consents only",id:"example-4-brand-consents-only",level:3},{value:"SDK Behavior Based on <code>setConsent</code>",id:"sdk-behavior-based-on-setconsent",level:2},{value:"Persistence",id:"persistence",level:2},{value:"Timing Considerations",id:"timing-considerations",level:2}];function a(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,o.jsxs)(n.p,{children:["Once the SDK is initialized for, you can use the ",(0,o.jsx)(n.code,{children:"setConsent"})," function to provide the user's consent status."]}),"\n",(0,o.jsxs)(n.p,{children:["For ",(0,o.jsx)(n.a,{href:"../Consent/customConsent",children:"custom consent"})," it is needed to specifiy the consent status."]}),"\n",(0,o.jsx)(n.p,{children:"It can also be used to specify any brand consents."}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"window.zeotap.setConsent(consentObject);\n"})}),"\n",(0,o.jsx)(n.h2,{id:"consentobject-structure",children:"consentObject Structure"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"consentObject"})," is a JavaScript object containing key-value pairs. It includes:"]}),"\n",(0,o.jsx)(n.h3,{id:"primary-consent-keys",children:"Primary Consent Keys"}),"\n",(0,o.jsxs)(n.h4,{id:"track-boolean",children:[(0,o.jsx)(n.code,{children:"track"})," (",(0,o.jsx)(n.code,{children:"boolean"}),")"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"true"}),": Allows the SDK to send tracking events (e.g., from ",(0,o.jsx)(n.code,{children:"setEventProperties"}),", page views)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"false"}),": Prevents the SDK from sending tracking events."]}),"\n"]}),"\n",(0,o.jsxs)(n.h4,{id:"cookiesync-boolean",children:[(0,o.jsx)(n.code,{children:"cookieSync"})," (",(0,o.jsx)(n.code,{children:"boolean"}),")"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"true"}),": Allows cookie syncing."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"false"}),": Disables cookie syncing."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"brand-consent-keys",children:"Brand Consent Keys"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Any additional key-value pairs in the object."}),"\n",(0,o.jsxs)(n.li,{children:["Used for tracking consent related to marketing (e.g., ",(0,o.jsx)(n.code,{children:"newsletterOptIn"}),", ",(0,o.jsx)(n.code,{children:"personalizationConsent"}),")."]}),"\n",(0,o.jsxs)(n.li,{children:["Passed as query parameters in spl call under ",(0,o.jsx)(n.code,{children:"z_p"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Do ",(0,o.jsx)(n.strong,{children:"not"})," directly control SDK tracking or cookie behavior."]}),"\n"]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"Brand consents are processed and sent to Zeotap independently of the track and cookieSync settings. Even if primary tracking consent is denied, brand consent information can still be transmitted."})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,o.jsx)(n.h3,{id:"example-1-grant-full-consent",children:"Example 1: Grant full consent"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"window.zeotap.setConsent({\n  track: true,\n  cookieSync: true\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"example-2-track-but-no-cookie-sync-with-brand-consent",children:"Example 2: Track but no cookie sync, with brand consent"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"window.zeotap.setConsent({\n  track: true,\n  cookieSync: false,\n  newsletterOptIn: true // Brand consent\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"example-3-deny-all-primary-consents",children:"Example 3: Deny all primary consents"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"window.zeotap.setConsent({\n  track: false,\n  cookieSync: false\n});\n"})}),"\n",(0,o.jsx)(n.h3,{id:"example-4-brand-consents-only",children:"Example 4: Brand consents only"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-javascript",children:"window.zeotap.setConsent({\n  analyticsConsent: true,\n  personalizationConsent: false\n});\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["setConsent call triggers a GET call to ",(0,o.jsx)(n.code,{children:"https://spl.zeotap.com/fp?"})," with   ",(0,o.jsx)(n.code,{children:'event_eventName: "setConsent"/"updateConsent"'}),"."]})}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsxs)(n.h2,{id:"sdk-behavior-based-on-setconsent",children:["SDK Behavior Based on ",(0,o.jsx)(n.code,{children:"setConsent"})]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:["Before ",(0,o.jsx)(n.code,{children:"setConsent"})," is called:"]}),(0,o.jsx)(n.br,{}),"\n","If ",(0,o.jsx)(n.code,{children:"useConsent"})," is ",(0,o.jsx)(n.code,{children:"true"}),", the SDK queues events until ",(0,o.jsx)(n.code,{children:"setConsent"})," provides a ",(0,o.jsx)(n.code,{children:"track"})," value (or a timeout occurs)."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:["After ",(0,o.jsx)(n.code,{children:"setConsent({ track: true })"}),":"]}),(0,o.jsx)(n.br,{}),"\n","Events are sent to Zeotap."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:["After ",(0,o.jsx)(n.code,{children:"setConsent({ track: false })"}),":"]}),(0,o.jsx)(n.br,{}),"\n","Events are ignored; no data is sent."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsxs)(n.strong,{children:["After ",(0,o.jsx)(n.code,{children:"setConsent({ cookieSync: false })"}),":"]}),(0,o.jsx)(n.br,{}),"\n","Cookie syncing is disabled."]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Brand Consents:"}),(0,o.jsx)(n.br,{}),"\n","Stored and included in future event payloads under ",(0,o.jsx)(n.code,{children:"z_p"})," query parameters."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"persistence",children:"Persistence"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["By default, consent is hashed and stored in ",(0,o.jsx)(n.strong,{children:"Session Storage"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["If ",(0,o.jsx)(n.code,{children:"persistenceInCookieStorage: true"})," is set during init, consent is stored in a ",(0,o.jsx)(n.strong,{children:"first-party cookie"})," \u2014 useful for cross-subdomain persistence. ",(0,o.jsxs)(n.a,{href:"../Configurations/persistenceInCookieStorage",children:["Learn more about ",(0,o.jsx)(n.code,{children:"persistenceInCookieStorage"})]})]}),"\n"]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"timing-considerations",children:"Timing Considerations"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Call ",(0,o.jsx)(n.code,{children:"setConsent"})," ",(0,o.jsx)(n.strong,{children:"as early as possible"})," after SDK init:","\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Based on stored preferences, or"}),"\n",(0,o.jsx)(n.li,{children:"Right after the user makes a consent choice via your UI."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["The SDK supports ",(0,o.jsx)(n.code,{children:"setConsent"})," being called at ",(0,o.jsx)(n.strong,{children:"any time"})," and adapts behavior for future events."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>c});var t=s(6540);const o={},r=t.createContext(o);function i(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);