"use strict";(self.webpackChunkmy_docs=self.webpackChunkmy_docs||[]).push([[2487],{7098:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"interact","title":"Interact SDK","description":"Interact SDK","source":"@site/docs/websdk/interact.md","sourceDirName":".","slug":"/interact","permalink":"/zeotap-web-sdk-docs/websdk/docs/interact","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1748239245000,"sidebarPosition":5,"frontMatter":{"sidebar_position":5,"title":"Interact SDK","description":"Interact SDK"},"sidebar":"DocumentationSidebar","previous":{"title":"Custom Consent Management","permalink":"/zeotap-web-sdk-docs/websdk/docs/Consent/customConsent"},"next":{"title":"Examples","permalink":"/zeotap-web-sdk-docs/websdk/docs/Examples/"}}');var a=t(4848),s=t(8453);const i={sidebar_position:5,title:"Interact SDK",description:"Interact SDK"},o="Interact SDK Integration Guide",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Web SDK Already Integrated",id:"web-sdk-already-integrated",level:2},{value:"Without Web SDK",id:"without-web-sdk",level:2},{value:"Retrieving Data on the Client Side Based on Configured \u201cData to send\u201d for an Interaction",id:"retrieving-data-on-the-client-side-based-on-configured-data-to-send-for-an-interaction",level:2},{value:"1. Local Storage",id:"1-local-storage",level:3},{value:"2. Session Storage",id:"2-session-storage",level:3},{value:"3. Callback Function",id:"3-callback-function",level:3},{value:"Google Ad Manager Integration",id:"google-ad-manager-integration",level:2},{value:"Prerequisite",id:"prerequisite",level:3},{value:"Option 1: Callback",id:"option-1-callback",level:3},{value:"Option 2: Local Storage",id:"option-2-local-storage",level:3},{value:"Adobe Target Integration",id:"adobe-target-integration",level:2},{value:"Prerequisite",id:"prerequisite-1",level:3},{value:"Serve without delay",id:"serve-without-delay",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"interact-sdk-integration-guide",children:"Interact SDK Integration Guide"})}),"\n",(0,a.jsxs)(n.p,{children:["This guide explains how to integrate ",(0,a.jsx)(n.strong,{children:"Zeotap\u2019s Interact SDK"})," into your website using the Web SDK or directly."]}),"\n",(0,a.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,a.jsxs)(n.p,{children:["The ",(0,a.jsx)(n.strong,{children:"Interact SDK"})," enables secure, real-time client-side data delivery based on server-side configuration from your Zeotap account. It facilitates routing user profile data to supported platforms (e.g., Google Ad Manager, Adobe Target)."]}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"web-sdk-already-integrated",children:"Web SDK Already Integrated"}),"\n",(0,a.jsxs)(n.p,{children:["If you already use Zeotap's Web SDK, enable Interact by setting the ",(0,a.jsx)(n.code,{children:"loadInteractScript"})," option to ",(0,a.jsx)(n.code,{children:"true"})," during initialization."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'\x3c!-- Zeotap JS SDK --\x3e\n<script type="text/javascript">\n!function(e,t){\n  var n=t.createElement("script");\n  n.type="text/javascript", n.crossorigin="anonymous", n.async=!0;\n  n.src="https://content.zeotap.com/sdk/zeotap.min.js";\n  var s=t.getElementsByTagName("script")[0];\n  s.parentNode.insertBefore(n,s);\n  function o(e,t,n){\n    function s(t){e[t]=function(){e[n].push([t].concat(Array.prototype.slice.call(arguments,0)))}} \n    for(var o=0;o<t.length;o++)s(t[o])\n  }\n  var r=e.zeotap||{_q:[],_qcmp:[]};\n  o(r,["init","setEventProperties","setUserProperties","setPageProperties","setMetaProperties","setUserIdentities","unsetUserIdentites","setZI"],"_q");\n  o(r,["setConsent","addAskForConsentActionListener"],"_qcmp");\n  e.zeotap=r;\n}(window,document);\n<\/script>\n\n<script type="text/javascript">\nwindow.zeotap.init("<YOUR_WRITE_KEY>", {\n  loadInteractScript: true,\n  // ... other options\n});\n<\/script>\n'})}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"The Zeotap Interact SDK will reference the source mapping and API key associated with the Zeotap JS SDK tag. Only the mapped identifiers from the source will be used to look up the user's profile in Zeotap."})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"without-web-sdk",children:"Without Web SDK"}),"\n",(0,a.jsx)(n.p,{children:"If you're not using the Web SDK, add the Interact SDK directly to the head of your HTML/website."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-html",children:'<script type="text/javascript">\n!function(t,n){\n  var e=n.createElement("script");\n  e.type="text/javascript", e.crossorigin="anonymous", e.async=!0;\n  e.src="https://content.zeotap.com/sdk/interact.min.js";\n  var o=n.getElementsByTagName("script")[0];\n  o.parentNode.insertBefore(e,o);\n  var a=t.zeotapInteract||{_q:[]};\n  !function(t,n,e){\n    function o(n){t[n]=function(){t[e].push([n].concat(Array.prototype.slice.call(arguments,0)))}} \n    for(var a=0;a<n.length;a++)o(n[a])\n  }(a,["init","setUserIdentities","getUserIdentities"],"_q");\n  t.zeotapInteract=a;\n  window.zeotapInteract.init("<API_KEY>");\n}(window,document);\n<\/script>\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Note:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Replace ",(0,a.jsx)("a",{href:"./Configurations/writeKey",children:(0,a.jsx)(n.code,{children:"<API_KEY>"})})," with your Web Javascript API source key."]}),"\n",(0,a.jsxs)(n.li,{children:["For identifier lookup, please set the first-party identifier on the page using our ",(0,a.jsx)("a",{href:"./APIReference/setUserIdentities",children:(0,a.jsx)(n.code,{children:"setUserIdentities"})})," method. This identifier will be used for lookups on the Zeotap end."]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsxs)(n.p,{children:["Ensure that the identifier is passed using the same field name as the one used for the API key source mentioned earlier. This consistency is essential for the SDK to recognize the corresponding field in the Zeotap catalogue for lookups. For example, if you're sending a user ID as ",(0,a.jsx)(n.code,{children:"user_id"})," from your server-side source, you must use the same field name when setting the IDs on the page through the ",(0,a.jsx)(n.code,{children:"setUserIdentities"})," method."]})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"retrieving-data-on-the-client-side-based-on-configured-data-to-send-for-an-interaction",children:"Retrieving Data on the Client Side Based on Configured \u201cData to send\u201d for an Interaction"}),"\n",(0,a.jsx)(n.p,{children:"You can access the Interact SDK output in one of three ways:"}),"\n",(0,a.jsx)(n.h3,{id:"1-local-storage",children:"1. Local Storage"}),"\n",(0,a.jsxs)(n.p,{children:["Stores the selected data in local storage under the Zeotap key ",(0,a.jsx)(n.code,{children:"zeoParamsStoreLocal"}),", which the consuming platform can access on the client side. Refer to the ",(0,a.jsx)(n.a,{href:"./interact#google-ad-manager-integration",children:"GAM implementation"})," below for guidance on implementing a local storage-based workflow."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'if (typeof Storage !== "undefined") {\n  var targetingParamStr = localStorage.getItem("zeoParamsStoreLocal");\n  if (targetingParamStr) {\n    var targetingParameters = JSON.parse(targetingParamStr);\n    // Use targetingParameters here\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"2-session-storage",children:"2. Session Storage"}),"\n",(0,a.jsxs)(n.p,{children:["Stores the selected data in session storage under the Zeotap key ",(0,a.jsx)(n.code,{children:"zeoParamsStoreSession"}),", which can be accessed by the consuming platform. Similar to local storage, you can push data to session storage and retrieve it as shown below."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'if (typeof Storage !== "undefined") {\n  var targetingParamStr = sessionStorage.getItem("zeoParamsStoreSession");\n  if (targetingParamStr) {\n    var targetingParameters = JSON.parse(targetingParamStr);\n    // Use targetingParameters here\n  }\n}\n'})}),"\n",(0,a.jsx)(n.h3,{id:"3-callback-function",children:"3. Callback Function"}),"\n",(0,a.jsx)(n.p,{children:"Passes the selected data to the zeoParamsCallback() function, which can be directly accessed by the consuming platform on the client side."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"window.zeoParamsCallbackCalled = false;\n\n// fail-safe after 2 seconds\nsetTimeout(() => {\n  window.zeoParamsCallback({});\n}, 2000);\n\nwindow.zeoParamsCallback = function (targetingParameters) {\n  if (window.zeoParamsCallbackCalled) return;\n  window.zeoParamsCallbackCalled = true;\n  // Use targetingParameters here\n};\n"})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"google-ad-manager-integration",children:"Google Ad Manager Integration"}),"\n",(0,a.jsx)(n.h3,{id:"prerequisite",children:"Prerequisite"}),"\n",(0,a.jsxs)(n.p,{children:["If you plan to send only ",(0,a.jsx)(n.strong,{children:"Segment membership"})," to Google Ad Manager (GAM), follow these steps:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Create the required ",(0,a.jsx)(n.strong,{children:"segments"})," in Zeotap for tagging user profiles with ",(0,a.jsx)(n.a,{href:"https://docs.zeotap.com/articles/#!segment-customer/enable-membership/q/membership/qp/1/qid/15555",children:"segment memberships"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Define and target ",(0,a.jsx)(n.strong,{children:"key/value parameters"})," in Google Ad Manager.","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["For example, for segment membership, the key would be ",(0,a.jsx)(n.code,{children:'"segment_membership"'}),", and the values would be the list of segment IDs the user is part of."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Google Documentation"})," (Recommended Reading):"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://support.google.com/dfp_premium/answer/188092?hl=en&ref_topic=1638397",children:"Defining Key-Value Targeting"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://support.google.com/dfp_premium/answer/177381?hl=en&ref_topic=1638397",children:"Creating Targeted Ads"})}),"\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://support.google.com/dfp_premium/answer/2423498",children:"Key-Value Parameters Overview"})}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"Ensure Zeotap Interact SDK is implemented as described to work correctly."}),"\n",(0,a.jsx)(n.h3,{id:"option-1-callback",children:"Option 1: Callback"}),"\n",(0,a.jsx)(n.p,{children:"This solution fetches the current profile of the user (e.g., segment membership) and sends it to GAM. With this setup, ads will be displayed once Zeotap has rendered the profile information to GAM."}),"\n",(0,a.jsx)(n.p,{children:"Place or trigger the following code after the Zeotap Interact SDK and GAM jsTag"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:"window.zeoParamsCallbackCalled = false;\n// fail-safe after 2 seconds\nsetTimeout(function () {\n  window.zeoParamsCallback({});\n}, 2000);\n\nwindow.zeoParamsCallback = function (targetingParameters) {\n  if (window.zeoParamsCallbackCalled) {\n    // callback already called\n    return;\n  }\n  window.zeoParamsCallbackCalled = true;\n\n// Your Google Ad Manager code should go here, followed by  \n// Sending targeting params for this user to Google ad manager\n  if (window.googletag.pubads) {\n    Object.keys(targetingParameters).forEach((key) => {\n      window.googletag.pubads().setTargeting(key, targetingParameters[key]);\n    });\n  }\n};\n\n"})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"This ensures that ads are displayed only after the user's profile information has been updated in GAM, providing the platform with the most current data. However, if the timer expires without receiving a response, GAM will still render and display a default or generic banner (if setup). The drawback is that this may cause a delay before the ads are shown."})}),"\n",(0,a.jsx)(n.h3,{id:"option-2-local-storage",children:"Option 2: Local Storage"}),"\n",(0,a.jsx)(n.p,{children:"This solution pushes profile information into local storage. Google Tag Manager can then read the targeting parameters from the browser\u2019s local storage using the code provided below."}),"\n",(0,a.jsx)(n.p,{children:"Place or trigger the following code after the Zeotap SDKs :"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'if (typeof Storage !== "undefined") {\n  var targetingParamStr = localStorage.getItem("zeoParamsStoreLocal");\n\n  if (targetingParamStr) {\n    var targetingParameters = JSON.parse(targetingParamStr);\n\n    //Please add the below code after the GAM tag\n\n    const targetingParams = JSON.parse(params);\n    if (window.googletag.pubads) {\n      Object.keys(targetingParameters).forEach((key) => {\n        window.googletag.pubads().setTargeting(key, targetingParameters[key]);\n      });\n    }\n  }\n}\n\n'})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"The benefit of this solution is that ads will be shown without delay for returning visitors or on subsequent page visits. However, the drawback is that first-time visitors to the landing page may not receive a personalized ad."})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.h2,{id:"adobe-target-integration",children:"Adobe Target Integration"}),"\n",(0,a.jsx)(n.h3,{id:"prerequisite-1",children:"Prerequisite"}),"\n",(0,a.jsxs)(n.p,{children:["If you plan to send only ",(0,a.jsx)(n.strong,{children:"Segment membership"})," to Adobe Target, follow these steps:"]}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["Create the required ",(0,a.jsx)(n.strong,{children:"segments"})," in Zeotap for tagging user profiles with ",(0,a.jsx)(n.a,{href:"https://docs.zeotap.com/articles/#!segment-customer/enable-membership/q/membership/qp/1/qid/15555",children:"segment memberships"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["Define and target ",(0,a.jsx)(n.strong,{children:"key/value parameters"})," in Adobe Target.","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["For example:","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["If you have defined the key as ",(0,a.jsx)(n.code,{children:'"segment_membership"'})," in both Adobe and Zeotap, the value received will be a list of segment IDs associated with a user."]}),"\n",(0,a.jsxs)(n.li,{children:["The key format ",(0,a.jsx)(n.strong,{children:"depends on your Adobe Target setup"}),":","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["If targeting is configured with the key as ",(0,a.jsx)(n.code,{children:"visitor profile"}),", you must send it on the client side as ",(0,a.jsx)(n.code,{children:"profile.segment_membership"}),"."]}),"\n",(0,a.jsxs)(n.li,{children:["If it\u2019s set up as a custom key, you can simply send it as ",(0,a.jsx)(n.code,{children:"segment_membership"}),"."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Adobe Documentation:"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:["You can refer the official Adobe Documentation ",(0,a.jsx)(n.a,{href:"https://experienceleague.adobe.com/en/docs/target-dev/developer/client-side/at-js-implementation/functions-overview/adobe-target-getoffer",children:"Link here"})]}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"serve-without-delay",children:"Serve without delay"}),"\n",(0,a.jsx)(n.p,{children:"This solution pushes profile information into local storage. Adobe Target can then read the targeting parameters from the browser\u2019s local storage using the code provided below."}),"\n",(0,a.jsx)(n.p,{children:"Place or trigger the following code after the Zeotap SDKs, Adobe Target is loaded:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-js",children:'window.targetPageParams = function () {\n  // read data from local storage\n  if (typeof Storage !== "undefined") {\n    var targetingParamStr = localStorage.getItem("zeoParamsStoreLocal");\n\n    if (targetingParamStr) {\n      try {\n        const params = JSON.parse(targetingParamStr);\n        return { ...params };\n      } catch (e) {\n        console.error(e);\n        return {};\n      }\n    }\n  }\n};\n\n'})}),"\n",(0,a.jsx)(n.admonition,{type:"info",children:(0,a.jsx)(n.p,{children:"The benefit of this solution is that ads will be shown without delay for returning visitors or on subsequent page visits. However, the drawback is that first-time visitors to the landing page may not receive a personalized ad."})}),"\n",(0,a.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>o});var r=t(6540);const a={},s=r.createContext(a);function i(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);